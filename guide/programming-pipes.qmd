---
title: "Flexible pipes"
jupyter:
  jupytext:
    formats: 'qmd:quarto'
    text_representation:
      extension: .qmd
      format_name: quarto
      format_version: '1.0'
      jupytext_version: 1.14.0
  kernelspec:
    display_name: Python 3 (ipykernel)
    language: python
    name: python3
---


```{python}
from siuba.siu import _, pipe, call
from siuba import count
from siuba.data import mtcars
```



## Pipe to DataFrame methods

Sometimes it is helpful to use Pandas DataFrame methods, in addition to siuba verbs.
This can be done by piping the data to `_.<some_method>()`.

Here is an example using the siuba verb `count()`, with the pandas method `.sort_values()`.
```{python}
from siuba import _, count
from siuba.data import mtcars

(mtcars
    >> count(_.cyl)         # this is a siuba verb
    >> _.sort_values("n")   # this is a pandas method
)
```

Here is another example, using the DataFrame `.shape` attribute.

:::{layout-ncol=2}


```{python}
# siuba pipe
mtcars >> _.shape[0]
```

```{python}
#| output: false
# regular pandas
mtcars.shape[0]
```

:::



## Pipe to external functions

Use `call()` to pipe data into any function call.

The example below pipes to the seaborn's `barplot` function.

```{python}
from siuba.siu import call
import seaborn as sns

mtcars >> count(_.cyl) >> call(sns.barplot, x="cyl", y="n", data=_)
```

Note that `sns.barplot()` expects the data as a named argument,
so we pass `data=_`, where `_` is a placeholder for the data.

`call()` can also take a single function to call the data on.

:::{layout-ncol=2}

```{python}
# piping
mtcars >> call(len)
```

```{python}
# regular function call
len(mtcars)
```

:::
